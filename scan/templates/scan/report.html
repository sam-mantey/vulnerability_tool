{% extends 'core/base.html' %}
{% load  static %}
{% block title %}Report Detail {% endblock %}

{% block script%}
<script>
  const type_risk_num = {{type_risk_number}}
  const username = `${{username|safe}}`
  const pk = {{pk}}
  const json_url = `/${username}/scan_json/${pk}/`
</script>
<script type="text/javascript" src="{% static 'scan/detail.js' %}"></script>
<script type="text/javascript" src="{% static 'scan/chart.js' %}" ></script>
{% endblock%}

{% block content %}
<h1 class='px-12 py-6 text-2xl font-bold'>Vulnerability Report for {{scan_detail.url}} </h1>
<!-- <p>{{type_risk_number.0}}</p> -->
<div class='mt-10 flex mx-auto w-[80%] bg-white rounded-xl p-10 drop-shadow-2xl'>
  <div class='w-1/2'>
    <canvas id='myChart' width='400' height='400' class='mx-auto drop-shadow-md'></canvas>
  </div>

  <div class='flex flex-col gap-y-6 items-center w-1/2 '>
    <h2 class='text-xl font-bold'>Select the alert type to view the results</h2>
    <a href='#alerts' id='high_risk' class="px-6 py-3 drop-shadow-xl text-lg font-semibold bg-red-600 hover:bg-red-500 text-white rounded-xl min-w-[220px] cursor-pointer text-center flex gap-x-4">
      <p>High Risk Alerts</p>
      <p class='bg-white  px-2 rounded-full text-black '>{{type_risk_number.0}}</p>
    </a>
    <a href='#alerts' id='medium-risk' class="px-6 py-3 drop-shadow-xl font-semibold bg-orange-600 hover:bg-orange-500 text-white min-w-[220px] cursor-pointer rounded-xl text-center flex gap-x-4">
      <p> Meduim Risk Alerts</p>
      <p class='bg-white px-2 rounded-full text-black '>{{type_risk_number.1}}</p>
    </a>
    <a href='#alerts' id='low-risk' class="px-6 py-3 text-lg drop-shadow-xl font-semibold bg-yellow-600 hover:bg-yellow-500 text-white min-w-[220px] cursor-pointer rounded-xl text-center flex gap-x-4">
      <p>Low Risk Alerts</p>
      <p class='bg-white px-2 text-black rounded-full '>{{type_risk_number.2}}</p>
    </a>
    <a href='#alerts' id='info-risk' class="px-6 py-3 text-lg drop-shadow-xl font-semibold bg-blue-700 hover:bg-blue-500 cursor-pointer text-white min-w-[220px] rounded-xl text-center flex  gap-x-4">
      <p>Informational Alerts</p>
      <p class='bg-white rounded-full text-black px-2 '>{{type_risk_number.3}}</p>
    </a>
  </div>
</div>
  
  <section>
    <div class="w-[95%] border-2 px-4 py-10 max-h-screen overflow-y-scroll mx-auto mt-20 mb-20">
      <div class="bg-white drop-shadow rounded-lg overflow-hidden">
        <div class="p-6 border-b border-gray-200">
           <h2 class="text-2xl font-bold mb-2" id="risk_type">ALerts</h2>
        </div>
        <div class="p-6">
          <table class="min-w-full table-auto">
            <thead>
              <tr>
                <th class="px-4 py-2">Alert Name</th>
                <th class="px-4 py-2">Confidence</th>
                <th class="px-4 py-2">Url</th>
                <th class="px-4 py-2">Description</th>
                <th class="px-4 py-2">Solution</th>
              </tr>
            </thead>
            <tbody id="alerts">
              <!-- {% for scan in scans %}
                <tr class="table-row-clickable cursor-pointer text-center">
                  <td class="border px-4 py-2"><a href='{% url 'scan:scan_detail' request.user.username scan.id%}'>{{scan.id}}</a></td>
                  <td class="border px-4 py-2">{{scan.scan_type}}</td>
                  <td class="border px-4 py-2"><a href='{% url "scan:scan_json" request.user.username scan.id %}'> {{scan.url}}</a></td>
                  <td class="border px-4 py-2">{{scan.date_created}}</td>
                  <td class="border px-4 py-2 text-green-600 text-yellow-60">Succesful</td>
                </tr>
              {% endfor %}  -->
            </tbody>
          </table>
        </div>
      </div>
  </div>
  </section>

{% endblock %}
