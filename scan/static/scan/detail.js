document.addEventListener('DOMContentLoaded', () => {
  const highRiskElement = document.getElementById('high_risk');
  const mediumRiskElement = document.getElementById('medium-risk');
  const lowRiskElement = document.getElementById('low-risk');
  const infoRiskElement = document.getElementById('info-risk');
  const displayAlertsElement = document.getElementById('alerts');
  const riskTypeElement = document.getElementById('risk_type');

   // Replace with your actual URL

  const get_alerts = async (url) => {
    let alerts;
    try {
      const response = await fetch(url);

      if (!response.ok) {
        throw new Error(`Network response was not ok: ${response.statusText}`);
      }

      alerts = await response.json();
    } catch (error) {
      console.error(`An error occurred: ${error.message}`);
    }

    return alerts;
  };

  highRiskElement.addEventListener('click', async () => {
    riskTypeElement.textContent = 'High Risk Alerts';
    const alerts = await get_alerts(json_url);

    if (alerts) {
      displayAlertsElement.innerHTML = alerts.high_alerts.map(alert => `
        <tr class="table-row-clickable cursor-pointer">
          <td class="border px-4 py-2 font-bold">${alert.name}</td>
          <td class="border px-4 py-2">${alert.confidence}</td>
          <td class="border px-4 py-2 text-blue-400"><a href='${alert.url}'>Link</a></td>
          <td class="border px-4 py-2">${alert.description}</td>
          <td class="border px-4 py-2 text-yellow-60">${alert.solution}</td>
        </tr>
      `).join('');
    }
  });

  mediumRiskElement.addEventListener('click', async () => {
    riskTypeElement.textContent = 'Medium Risk Alerts';
    const alerts = await get_alerts(json_url);

    if (alerts) {
      displayAlertsElement.innerHTML = alerts.medium_alerts.map(alert => `
        <tr class="table-row-clickable cursor-pointer">
          <td class="border px-4 py-2 font-bold">${alert.name}</td>
          <td class="border px-4 py-2">${alert.confidence}</td>
          <td class="border px-4 py-2 text-blue-400"><a href='${alert.url}'>Link</a></td>
          <td class="border px-4 py-2">${alert.description}</td>
          <td class="border px-4 py-2 text-yellow-60">${alert.solution}</td>
        </tr>
      `).join('');
    }
  });

  lowRiskElement.addEventListener('click', async () => {
    riskTypeElement.textContent = 'Low Risk Alerts';
    const alerts = await get_alerts(json_url);

    if (alerts) {
      displayAlertsElement.innerHTML = alerts.low_alerts.map(alert => `
        <tr class="table-row-clickable cursor-pointer">
          <td class="border px-4 py-2 font-bold">${alert.name}</td>
          <td class="border px-4 py-2">${alert.confidence}</td>
          <td class="border px-4 py-2 text-blue-400"><a href='${alert.url}'>Link</a></td>
          <td class="border px-4 py-2">${alert.description}</td>
          <td class="border px-4 py-2 text-yellow-60">${alert.solution}</td>
        </tr>
      `).join('');
    }
  });

  infoRiskElement.addEventListener('click', async () => {
    riskTypeElement.textContent = 'Information Alerts';
    const alerts = await get_alerts(json_url);

    if (alerts) {
      displayAlertsElement.innerHTML = alerts.info_risks.map(alert => `
        <tr class="table-row-clickable cursor-pointer">
          <td class="border px-4 py-2 font-bold">${alert.name}</td>
          <td class="border px-4 py-2">${alert.confidence}</td>
          <td class="border px-4 py-2 text-blue-400"><a href='${alert.url}'>Link</a></td>
          <td class="border px-4 py-2">${alert.description}</td>
          <td class="border px-4 py-2 text-yellow-60">${alert.solution}</td>
        </tr>
      `).join('');
    }
  });
});

  